{
  "version": 3,
  "sources": ["../../three/examples/jsm/interactive/InteractiveGroup.js"],
  "sourcesContent": ["import {\n\tGroup,\n\tMatrix4,\n\tRaycaster,\n\tVector2\n} from 'three';\n\nconst _pointer = new Vector2();\nconst _event = { type: '', data: _pointer };\n\nclass InteractiveGroup extends Group {\n\n\tconstructor( renderer, camera ) {\n\n\t\tsuper();\n\n\t\tconst scope = this;\n\n\t\tconst raycaster = new Raycaster();\n\t\tconst tempMatrix = new Matrix4();\n\n\t\t// Pointer Events\n\n\t\tconst element = renderer.domElement;\n\n\t\tfunction onPointerEvent( event ) {\n\n\t\t\tevent.stopPropagation();\n\n\t\t\tconst rect = renderer.domElement.getBoundingClientRect();\n\t\t\t\n\t\t\t_pointer.x = ( event.clientX - rect.left ) / rect.width * 2 - 1;\n\t\t\t_pointer.y = - ( event.clientY - rect.top ) / rect.height * 2 + 1;\n\n\t\t\traycaster.setFromCamera( _pointer, camera );\n\n\t\t\tconst intersects = raycaster.intersectObjects( scope.children, false );\n\n\t\t\tif ( intersects.length > 0 ) {\n\n\t\t\t\tconst intersection = intersects[ 0 ];\n\n\t\t\t\tconst object = intersection.object;\n\t\t\t\tconst uv = intersection.uv;\n\n\t\t\t\t_event.type = event.type;\n\t\t\t\t_event.data.set( uv.x, 1 - uv.y );\n\n\t\t\t\tobject.dispatchEvent( _event );\n\n\t\t\t}\n\n\t\t}\n\n\t\telement.addEventListener( 'pointerdown', onPointerEvent );\n\t\telement.addEventListener( 'pointerup', onPointerEvent );\n\t\telement.addEventListener( 'pointermove', onPointerEvent );\n\t\telement.addEventListener( 'mousedown', onPointerEvent );\n\t\telement.addEventListener( 'mouseup', onPointerEvent );\n\t\telement.addEventListener( 'mousemove', onPointerEvent );\n\t\telement.addEventListener( 'click', onPointerEvent );\n\n\t\t// WebXR Controller Events\n\t\t// TODO: Dispatch pointerevents too\n\n\t\tconst events = {\n\t\t\t'move': 'mousemove',\n\t\t\t'select': 'click',\n\t\t\t'selectstart': 'mousedown',\n\t\t\t'selectend': 'mouseup'\n\t\t};\n\n\t\tfunction onXRControllerEvent( event ) {\n\n\t\t\tconst controller = event.target;\n\n\t\t\ttempMatrix.identity().extractRotation( controller.matrixWorld );\n\n\t\t\traycaster.ray.origin.setFromMatrixPosition( controller.matrixWorld );\n\t\t\traycaster.ray.direction.set( 0, 0, - 1 ).applyMatrix4( tempMatrix );\n\n\t\t\tconst intersections = raycaster.intersectObjects( scope.children, false );\n\n\t\t\tif ( intersections.length > 0 ) {\n\n\t\t\t\tconst intersection = intersections[ 0 ];\n\n\t\t\t\tconst object = intersection.object;\n\t\t\t\tconst uv = intersection.uv;\n\n\t\t\t\t_event.type = events[ event.type ];\n\t\t\t\t_event.data.set( uv.x, 1 - uv.y );\n\n\t\t\t\tobject.dispatchEvent( _event );\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst controller1 = renderer.xr.getController( 0 );\n\t\tcontroller1.addEventListener( 'move', onXRControllerEvent );\n\t\tcontroller1.addEventListener( 'select', onXRControllerEvent );\n\t\tcontroller1.addEventListener( 'selectstart', onXRControllerEvent );\n\t\tcontroller1.addEventListener( 'selectend', onXRControllerEvent );\n\n\t\tconst controller2 = renderer.xr.getController( 1 );\n\t\tcontroller2.addEventListener( 'move', onXRControllerEvent );\n\t\tcontroller2.addEventListener( 'select', onXRControllerEvent );\n\t\tcontroller2.addEventListener( 'selectstart', onXRControllerEvent );\n\t\tcontroller2.addEventListener( 'selectend', onXRControllerEvent );\n\n\t}\n\n}\n\nexport { InteractiveGroup };\n"],
  "mappings": ";;;;;;;;AAOA,IAAM,WAAW,IAAI,QAAQ;AAC7B,IAAM,SAAS,EAAE,MAAM,IAAI,MAAM,SAAS;AAE1C,IAAM,mBAAN,cAA+B,MAAM;AAAA,EAEpC,YAAa,UAAU,QAAS;AAE/B,UAAM;AAEN,UAAM,QAAQ;AAEd,UAAM,YAAY,IAAI,UAAU;AAChC,UAAM,aAAa,IAAI,QAAQ;AAI/B,UAAM,UAAU,SAAS;AAEzB,aAAS,eAAgB,OAAQ;AAEhC,YAAM,gBAAgB;AAEtB,YAAM,OAAO,SAAS,WAAW,sBAAsB;AAEvD,eAAS,KAAM,MAAM,UAAU,KAAK,QAAS,KAAK,QAAQ,IAAI;AAC9D,eAAS,IAAI,EAAI,MAAM,UAAU,KAAK,OAAQ,KAAK,SAAS,IAAI;AAEhE,gBAAU,cAAe,UAAU,MAAO;AAE1C,YAAM,aAAa,UAAU,iBAAkB,MAAM,UAAU,KAAM;AAErE,UAAK,WAAW,SAAS,GAAI;AAE5B,cAAM,eAAe,WAAY,CAAE;AAEnC,cAAM,SAAS,aAAa;AAC5B,cAAM,KAAK,aAAa;AAExB,eAAO,OAAO,MAAM;AACpB,eAAO,KAAK,IAAK,GAAG,GAAG,IAAI,GAAG,CAAE;AAEhC,eAAO,cAAe,MAAO;AAAA,MAE9B;AAAA,IAED;AAEA,YAAQ,iBAAkB,eAAe,cAAe;AACxD,YAAQ,iBAAkB,aAAa,cAAe;AACtD,YAAQ,iBAAkB,eAAe,cAAe;AACxD,YAAQ,iBAAkB,aAAa,cAAe;AACtD,YAAQ,iBAAkB,WAAW,cAAe;AACpD,YAAQ,iBAAkB,aAAa,cAAe;AACtD,YAAQ,iBAAkB,SAAS,cAAe;AAKlD,UAAM,SAAS;AAAA,MACd,QAAQ;AAAA,MACR,UAAU;AAAA,MACV,eAAe;AAAA,MACf,aAAa;AAAA,IACd;AAEA,aAAS,oBAAqB,OAAQ;AAErC,YAAM,aAAa,MAAM;AAEzB,iBAAW,SAAS,EAAE,gBAAiB,WAAW,WAAY;AAE9D,gBAAU,IAAI,OAAO,sBAAuB,WAAW,WAAY;AACnE,gBAAU,IAAI,UAAU,IAAK,GAAG,GAAG,EAAI,EAAE,aAAc,UAAW;AAElE,YAAM,gBAAgB,UAAU,iBAAkB,MAAM,UAAU,KAAM;AAExE,UAAK,cAAc,SAAS,GAAI;AAE/B,cAAM,eAAe,cAAe,CAAE;AAEtC,cAAM,SAAS,aAAa;AAC5B,cAAM,KAAK,aAAa;AAExB,eAAO,OAAO,OAAQ,MAAM,IAAK;AACjC,eAAO,KAAK,IAAK,GAAG,GAAG,IAAI,GAAG,CAAE;AAEhC,eAAO,cAAe,MAAO;AAAA,MAE9B;AAAA,IAED;AAEA,UAAM,cAAc,SAAS,GAAG,cAAe,CAAE;AACjD,gBAAY,iBAAkB,QAAQ,mBAAoB;AAC1D,gBAAY,iBAAkB,UAAU,mBAAoB;AAC5D,gBAAY,iBAAkB,eAAe,mBAAoB;AACjE,gBAAY,iBAAkB,aAAa,mBAAoB;AAE/D,UAAM,cAAc,SAAS,GAAG,cAAe,CAAE;AACjD,gBAAY,iBAAkB,QAAQ,mBAAoB;AAC1D,gBAAY,iBAAkB,UAAU,mBAAoB;AAC5D,gBAAY,iBAAkB,eAAe,mBAAoB;AACjE,gBAAY,iBAAkB,aAAa,mBAAoB;AAAA,EAEhE;AAED;",
  "names": []
}
